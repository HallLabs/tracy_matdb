This is a readme file to deploy you matdb and dependency docker images to AWS EC2 instance.

Before running the steps, please download your .pem file for accessing your EC2 instance.
1. On your local machine, build all the docker images with the following steps:
a. master dependencies images:
  cd tracy_docker_norima/ubuntu16.04/
  ./build_docker_images.sh
b.  build mtp images:
    cd tracy_science_norima/mtp
    ./build_docker_image.sh
c.  build matdb images:
    cd tracy_matdb_norima
    ./build_docker_image.sh

2. under this tracy_deploy foler:
  ./deploy.sh    (this will save all your docker images to .jar files)
  ./deploy_aws.sh  (this will copy all jar fils to your EC2 instance)
  login to your EC2 console with:
  ssh -i "matdb-test.pem" ubuntu@ec2-18-220-253-111.us-east-2.compute.amazonaws.com   (change this url with yours)
  ./load_docker_images_aws.sh  (this will load all those jar files to docker)
  note: if you don't have docker installed in EC2, run this command to install docker first:
  sudo apt-get install -y docker-ce
3. Now you can run the matdb with below steps:
   docker run -it matdb_stable /bin/bash
    docker exec -it <container name> /bin/bash  --to open another Shell to monitor 
 a. Remove the `~/compute` folder.
 b. Recreate the folder `mkdir -p ~/compute/MTP/CoWV`
 c. Run `mtp_build.sh` once
 d. Run `mtp_train_first_iter.sh` once
 e. Run `mtp_train_second_iter.sh` repeatedly until converge.

Note: The jar files is about 15G, it also occupied about 15G as docker images, so you need at least 30G to generate these docker images and save to local disk.
On EC2 you also need at least 30G space to host the jar files and docker images at first, although you can delete the jar files later.

