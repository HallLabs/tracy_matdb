
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Database &amp; Database Utility Documentation &#8212; matdb 0.0.5 documentation</title>
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Potential Fitting API" href="../fitting.html" />
    <link rel="prev" title="Prototype Database Documentation" href="prototype.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../fitting.html" title="Potential Fitting API"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="prototype.html" title="Prototype Database Documentation"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">matdb 0.0.5 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../databases.html" accesskey="U">Database Types</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="database-database-utility-documentation">
<h1>Database &amp; Database Utility Documentation<a class="headerlink" href="#database-database-utility-documentation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-matdb.database">
<span id="database-module"></span><h2>Database Module<a class="headerlink" href="#module-matdb.database" title="Permalink to this headline">¶</a></h2>
<p>Exposes classes and functions for interacting with the database
folders via a simple configuration file.</p>
<dl class="class">
<dt id="matdb.database.Controller">
<em class="property">class </em><code class="descclassname">matdb.database.</code><code class="descname">Controller</code><span class="sig-paren">(</span><em>config</em>, <em>tmpdir=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#Controller"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.Controller" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements methods for tying a configuration dictionary (in
YAML format) to instances of various databases.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>config</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – name of the YML file (without the .yml) that
specifies all information for constructing the set of databases.</li>
<li><strong>tmpdir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – path to a temporary directory to use for the
database. This is for unit testing purposes.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="matdb.database.Controller.specs">
<code class="descname">specs</code><a class="headerlink" href="#matdb.database.Controller.specs" title="Permalink to this definition">¶</a></dt>
<dd><p>the parsed settings from the YAML configuration file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="matdb.database.Controller.collections">
<code class="descname">collections</code><a class="headerlink" href="#matdb.database.Controller.collections" title="Permalink to this definition">¶</a></dt>
<dd><p>keys are configuration names listed in attribute
<cite>configs</cite> of the YAML file. Values are the <code class="xref py py-class docutils literal notranslate"><span class="pre">DatabaseCollection</span></code>
instances.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="matdb.database.Controller.legacy">
<code class="descname">legacy</code><a class="headerlink" href="#matdb.database.Controller.legacy" title="Permalink to this definition">¶</a></dt>
<dd><p>keys are legacy database names; values are
<a class="reference internal" href="legacy.html#matdb.database.legacy.LegacyDatabase" title="matdb.database.legacy.LegacyDatabase"><code class="xref py py-class docutils literal notranslate"><span class="pre">LegacyDatabase</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="matdb.database.Controller.plotdir">
<code class="descname">plotdir</code><a class="headerlink" href="#matdb.database.Controller.plotdir" title="Permalink to this definition">¶</a></dt>
<dd><p>path to the directory to store plots in for all
databases.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="matdb.database.Controller.venv">
<code class="descname">venv</code><a class="headerlink" href="#matdb.database.Controller.venv" title="Permalink to this definition">¶</a></dt>
<dd><p>name of a virtual environment to activate for plotting
potentials after fitting.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="matdb.database.Controller.execute">
<code class="descname">execute</code><span class="sig-paren">(</span><em>recovery=False</em>, <em>dfilter=None</em>, <em>env_vars=None</em>, <em>dryrun=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#Controller.execute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.Controller.execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Submits job array scripts for each database collection.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>recovery</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – when True, submit the script for running recovery
jobs.</li>
<li><strong>dfilter</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a>) – list of <cite>str</cite> patterns to match against <em>database</em>
names. This limits which databases are returned.</li>
<li><strong>env_vars</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – dict of environment variables to set before calling the
execution. The variables will be set back after execution.</li>
<li><strong>dryrun</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – when True, don’t submit any jobs for execution, just
say what would happen.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="matdb.database.Controller.extract">
<code class="descname">extract</code><span class="sig-paren">(</span><em>dfilter=None</em>, <em>cleanup='default'</em>, <em>asis=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#Controller.extract"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.Controller.extract" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs extract on each of the configuration’s databases.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>dfilter</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a>) – list of <cite>str</cite> patterns to match against <em>database</em>
names. This limits which databases are returned.</li>
<li><strong>cleanup</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – the level of cleanup to perform after extraction.</li>
<li><strong>asis</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – when True, read the results even if the calculation
didn’t converge to required accuracy.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="matdb.database.Controller.finalize">
<code class="descname">finalize</code><span class="sig-paren">(</span><em>dfilter=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#Controller.finalize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.Controller.finalize" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates the finalized version of the databases that were used for
fitting the potential. Stored in final_{matdb.version}.h5.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>dfilter</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a>) – list of <cite>str</cite> patterns to match against <em>database</em>
names. This limits which databases are returned.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="matdb.database.Controller.find">
<code class="descname">find</code><span class="sig-paren">(</span><em>pattern</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#Controller.find"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.Controller.find" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds a list of <a class="reference internal" href="#matdb.database.Group" title="matdb.database.Group"><code class="xref py py-class docutils literal notranslate"><span class="pre">Group</span></code></a> that match the given
pattern. The pattern is formed using <cite>group.dbname[[.seed].params]</cite>. <cite>*</cite>
can be used as a wildcard for any portion of the ‘.’-separated path.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Actually, an <a class="reference external" href="https://docs.python.org/3/library/fnmatch.html#fnmatch.fnmatch" title="(in Python v3.7)"><code class="xref py py-func docutils literal notranslate"><span class="pre">fnmatch()</span></code></a> pattern can be used.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>pattern</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – fnmatch pattern that follows the convention of the DB key. Alternatively the pattern can be a uuid.</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>Get all the dynamical matrix databases for the <cite>Pd</cite>
configuration. The example assumes that the database name is
<cite>phonon</cite> and that it includes a dynamical matrix step.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Pd</span> <span class="o">=</span> <span class="n">Controller</span><span class="p">(</span><span class="s2">&quot;Pd.yml&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Pd</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;DynMatrix.phonon.Pd.*&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Get all the database sequences for liquids across all configurations in
the database.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">CdWO4</span> <span class="o">=</span> <span class="n">Controller</span><span class="p">(</span><span class="s2">&quot;CdWO4.yml&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CdWO4</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;*.liquid*&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CdWO4</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">uuid</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="matdb.database.Controller.hash_dbs">
<code class="descname">hash_dbs</code><span class="sig-paren">(</span><em>dfilter=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#Controller.hash_dbs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.Controller.hash_dbs" title="Permalink to this definition">¶</a></dt>
<dd><p>Hashes the databases into a single hash.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>dfilter</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a>) – list of <cite>str</cite> patterns to match against <em>database</em>
names. This limits which databases are returned.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="matdb.database.Controller.ifiltered">
<code class="descname">ifiltered</code><span class="sig-paren">(</span><em>dfilter=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#Controller.ifiltered"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.Controller.ifiltered" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a <em>filtered</em> generator over databases in the collections of this object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>dfilter</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a>) – list of <cite>str</cite> patterns to match against <em>database</em>
names. This limits which databases are returned.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="matdb.database.Controller.recover">
<code class="descname">recover</code><span class="sig-paren">(</span><em>rerun=False</em>, <em>dfilter=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#Controller.recover"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.Controller.recover" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs recovery on this database to determine which configs failed and
then create a jobfile to requeue them for compute.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>rerun</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – when True, recreate the jobfile even if it already exists.</li>
<li><strong>dfilter</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a>) – list of <cite>str</cite> patterns to match against <em>database</em> names. This limits which databases are returned.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="matdb.database.Controller.relpaths">
<code class="descname">relpaths</code><span class="sig-paren">(</span><em>pattern</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#Controller.relpaths"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.Controller.relpaths" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds the relative paths for the seed configurations within the databases that
match to the pattern.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>pattern</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – the pattern to match.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="matdb.database.Controller.sequences">
<code class="descname">sequences</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#Controller.sequences"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.Controller.sequences" title="Permalink to this definition">¶</a></dt>
<dd><p>Compiles a list of all sequences in this set of databases.</p>
</dd></dl>

<dl class="method">
<dt id="matdb.database.Controller.setup">
<code class="descname">setup</code><span class="sig-paren">(</span><em>rerun=0</em>, <em>dfilter=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#Controller.setup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.Controller.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets up each of configuration’s databases.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>rerun</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – when &gt; 0, recreate the folders even if they
already exist.</li>
<li><strong>dfilter</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a>) – list of <cite>str</cite> patterns to match against <em>database</em>
names. This limits which databases sequences are returned.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="matdb.database.Controller.split">
<code class="descname">split</code><span class="sig-paren">(</span><em>recalc=0</em>, <em>dfilter=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#Controller.split"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.Controller.split" title="Permalink to this definition">¶</a></dt>
<dd><p>Splits the total available data in all databases into a training and holdout
set.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>recalc</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – when non-zero, re-split the data and overwrite any existing <a href="#id1"><span class="problematic" id="id2">*</span></a>.h5 files. This parameter decreases as rewrites proceed down the stack. To re-calculate lower-level h5 files, increase this value.</li>
<li><strong>dfilter</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a>) – list of <cite>str</cite> patterns to match against <em>database sequence</em> names. This limits which databases sequences are returned.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="matdb.database.Controller.status">
<code class="descname">status</code><span class="sig-paren">(</span><em>busy=False</em>, <em>dfilter=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#Controller.status"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.Controller.status" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints status messages for each of the configuration’s databases.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>busy</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – when True, print a list of the configurations that are
still busy being computed in DFT.</li>
<li><strong>dfilter</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a>) – list of <cite>str</cite> patterns to match against <em>database</em>
names. This limits which databases are returned.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="matdb.database.Controller.steps">
<code class="descname">steps</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#Controller.steps"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.Controller.steps" title="Permalink to this definition">¶</a></dt>
<dd><p>Compiles a list of all steps in this set of databases.</p>
</dd></dl>

<dl class="method">
<dt id="matdb.database.Controller.verify_hash">
<code class="descname">verify_hash</code><span class="sig-paren">(</span><em>hash_cand</em>, <em>dfilter=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#Controller.verify_hash"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.Controller.verify_hash" title="Permalink to this definition">¶</a></dt>
<dd><p>Verifies that the the candidate hash matches this matdb controller’s databases.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>hash_cand</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The candidate hash to check.</li>
<li><strong>dfilter</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a>) – list of <cite>str</cite> patterns to match against <em>database</em>
names. This limits which databases are returned.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">True if the hash matches the databases.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="matdb.database.Database">
<em class="property">class </em><code class="descclassname">matdb.database.</code><code class="descname">Database</code><span class="sig-paren">(</span><em>name</em>, <em>root</em>, <em>parent</em>, <em>steps</em>, <em>splits</em>, <em>ran_seed</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#Database"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.Database" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents a Database of groups (all inheriting from <a class="reference internal" href="#matdb.database.Group" title="matdb.database.Group"><code class="xref py py-class docutils literal notranslate"><span class="pre">Group</span></code></a>) that
are all related be the atomic configuration that they model.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">See the list of attributes below which correspond to the sections
in the YAML database specification file.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – name of the configuration that this database sequence is
operating for.</li>
<li><strong>root</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – root directory in which all other database sequences for
the configurations in the same specification will be stored.</li>
<li><strong>parent</strong> (<a class="reference internal" href="#matdb.database.Controller" title="matdb.database.Controller"><em>Controller</em></a>) – instance controlling multiple configurations.</li>
<li><strong>steps</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a>) – list of <cite>dict</cite> describing the kinds of sub-configuration
database steps to setup.</li>
<li><strong>splits</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – keys are split names; values are <cite>float</cite> <em>training</em>
percentages to use.</li>
<li><strong>ran_seed</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – random seed to use for splits in this database.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="matdb.database.Database.title">
<code class="descname">title</code><a class="headerlink" href="#matdb.database.Database.title" title="Permalink to this definition">¶</a></dt>
<dd><p>title for the alloy system that these databases work with.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="matdb.database.Database.config">
<code class="descname">config</code><a class="headerlink" href="#matdb.database.Database.config" title="Permalink to this definition">¶</a></dt>
<dd><p>name of the configuration that this database sequence is
running for.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="matdb.database.Database.species">
<code class="descname">species</code><a class="headerlink" href="#matdb.database.Database.species" title="Permalink to this definition">¶</a></dt>
<dd><p>list of <cite>str</cite> element names in the alloy system.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)">list</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="matdb.database.Database.potcars">
<code class="descname">potcars</code><a class="headerlink" href="#matdb.database.Database.potcars" title="Permalink to this definition">¶</a></dt>
<dd><p>keys are lower-case element names; values are <em>suffixes</em>
for the various pseudo-potentials that ship with VASP.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="matdb.database.Database.root">
<code class="descname">root</code><a class="headerlink" href="#matdb.database.Database.root" title="Permalink to this definition">¶</a></dt>
<dd><p>root directory in which all other database directories will
be stored. Defaults to the current directory.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="matdb.database.Database.plotdir">
<code class="descname">plotdir</code><a class="headerlink" href="#matdb.database.Database.plotdir" title="Permalink to this definition">¶</a></dt>
<dd><p>path to the directory to store plots in for this
database. Defaults to the parent controller’s plot directory.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="matdb.database.Database.incar">
<code class="descname">incar</code><a class="headerlink" href="#matdb.database.Database.incar" title="Permalink to this definition">¶</a></dt>
<dd><p>keys are valid settings in the INCAR file that should be
used as defaults for <em>all</em> database calculations (with their
corresponding values).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="matdb.database.Database.kpoints">
<code class="descname">kpoints</code><a class="headerlink" href="#matdb.database.Database.kpoints" title="Permalink to this definition">¶</a></dt>
<dd><p>keys are valid settings for the Mueller k-point PRECALC
file that should be used as default for <em>all</em> database calculations.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="matdb.database.Database.steps">
<code class="descname">steps</code><a class="headerlink" href="#matdb.database.Database.steps" title="Permalink to this definition">¶</a></dt>
<dd><p>keys are step names (e.g. <cite>dft</cite>, <cite>calibration</cite>,
etc.); values are the corresponding class instances.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">OrderedDict</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="matdb.database.Database.parent">
<code class="descname">parent</code><a class="headerlink" href="#matdb.database.Database.parent" title="Permalink to this definition">¶</a></dt>
<dd><p>instance controlling multiple configurations.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference internal" href="#matdb.database.Controller" title="matdb.database.Controller">Controller</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="matdb.database.Database.rec_bin">
<code class="descname">rec_bin</code><a class="headerlink" href="#matdb.database.Database.rec_bin" title="Permalink to this definition">¶</a></dt>
<dd><p>instance of the recycling bin database.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference internal" href="#matdb.database.RecycleBin" title="matdb.database.RecycleBin">RecycleBin</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="matdb.database.Database.execute">
<code class="descname">execute</code><span class="sig-paren">(</span><em>recovery=False</em>, <em>env_vars=None</em>, <em>dryrun=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#Database.execute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.Database.execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Submits job array files for any of the databases that are ready to
execute, but which haven’t been submitted yet.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>recovery</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – when True, submit the script for running recovery
jobs.</li>
<li><strong>env_vars</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – dict of environment variables to set before calling the
execution. The variables will be set back after execution.</li>
<li><strong>dryrun</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – when True, don’t submit any jobs for execution, just
say what would happen.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="matdb.database.Database.extract">
<code class="descname">extract</code><span class="sig-paren">(</span><em>cleanup='default'</em>, <em>asis=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#Database.extract"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.Database.extract" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs the extract methods of each database in the collection, in the
correct order.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>cleanup</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – the level of cleanup to perform after extraction.</li>
<li><strong>asis</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – when True, read the results even if the calculation
didn’t converge to required accuracy.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="matdb.database.Database.finalize">
<code class="descname">finalize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#Database.finalize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.Database.finalize" title="Permalink to this definition">¶</a></dt>
<dd><p>Finalizes the database to a dictionary that can be saved to an h5 file.</p>
</dd></dl>

<dl class="method">
<dt id="matdb.database.Database.hash_db">
<code class="descname">hash_db</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#Database.hash_db"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.Database.hash_db" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates the hash for the database.</p>
</dd></dl>

<dl class="method">
<dt id="matdb.database.Database.holdout_file">
<code class="descname">holdout_file</code><span class="sig-paren">(</span><em>split</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#Database.holdout_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.Database.holdout_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the full path to the h5 database file that can be
used to validate the potential fit.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>split</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – name of the split to use.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="matdb.database.Database.iconfigs">
<code class="descname">iconfigs</code><a class="headerlink" href="#matdb.database.Database.iconfigs" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a generator over all the configurations in all sub-steps of
this database.</p>
</dd></dl>

<dl class="attribute">
<dt id="matdb.database.Database.isteps">
<code class="descname">isteps</code><a class="headerlink" href="#matdb.database.Database.isteps" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a generator over steps in this sequence. The generator yields
the next step <em>only</em> if the previous one is already finished (i.e., the
<cite>ready()</cite> method returns True.</p>
</dd></dl>

<dl class="method">
<dt id="matdb.database.Database.recover">
<code class="descname">recover</code><span class="sig-paren">(</span><em>rerun=0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#Database.recover"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.Database.recover" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs recovery on this database to determine which configs failed and
then create a jobfile to requeue them for compute.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>rerun</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – when &gt; 0, recreate the jobfile even if it already exists.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="matdb.database.Database.setup">
<code class="descname">setup</code><span class="sig-paren">(</span><em>rerun=0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#Database.setup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.Database.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets up the database collection by generating the POTCAR file and
initializing any databases that haven’t already been initialized.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The db setup functions are setup to only execute once, and then only if their dependencies have completed their calculations. This method can, therefore, be safely called repeatedly between different terminal sessions.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>rerun</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – when &gt; 0, recreate the folders even if they
already exist. Higher levels redo more of the work.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="matdb.database.Database.split">
<code class="descname">split</code><span class="sig-paren">(</span><em>recalc=0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#Database.split"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.Database.split" title="Permalink to this definition">¶</a></dt>
<dd><p>Splits the database multiple times, one for each <cite>split</cite> setting in
the database specification.</p>
</dd></dl>

<dl class="method">
<dt id="matdb.database.Database.status">
<code class="descname">status</code><span class="sig-paren">(</span><em>busy=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#Database.status"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.Database.status" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints a status message for each of the databases relative
to VASP execution status.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>busy</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – when True, print a list of the configurations that are still busy being computed in DFT.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="matdb.database.Database.super_file">
<code class="descname">super_file</code><span class="sig-paren">(</span><em>split</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#Database.super_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.Database.super_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the full path to the h5 database file that can be
used to <em>super</em> validate the potential fit.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>split</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – name of the split to use.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="matdb.database.Database.to_dict">
<code class="descname">to_dict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#Database.to_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.Database.to_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dictionary of the database parameters and settings.</p>
</dd></dl>

<dl class="method">
<dt id="matdb.database.Database.train_file">
<code class="descname">train_file</code><span class="sig-paren">(</span><em>split</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#Database.train_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.Database.train_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the full path to the h5 database file that can be
used for training.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>split</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – name of the split to use.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="matdb.database.Group">
<em class="property">class </em><code class="descclassname">matdb.database.</code><code class="descname">Group</code><span class="sig-paren">(</span><em>cls=None</em>, <em>root=None</em>, <em>parent=None</em>, <em>prefix='S'</em>, <em>pgrid=None</em>, <em>nconfigs=None</em>, <em>calculator=None</em>, <em>seeds=None</em>, <em>config_type=None</em>, <em>execution=None</em>, <em>trainable=False</em>, <em>rec_bin=None</em>, <em>transforms=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#Group"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.Group" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents a collection of material configurations (varying in
structure and composition) from which a machine learning model can
be created. Includes logic for generating the DFT directories that
need to be run as well as extracting the relevant data from such
computations.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>execution</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – key-value pairs of settings for the supercomputer job
array batch file.</li>
<li><strong>root</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – full path to the root directory that this database will live
in.</li>
<li><strong>parent</strong> (<a class="reference internal" href="#matdb.database.Database" title="matdb.database.Database"><em>matdb.database.Database</em></a>) – the database that this
group of calculations belongs to.</li>
<li><strong>prefix</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – sub-sampled configurations will be stored using integer
ids after this prefix; for example <cite>S.1</cite>, <cite>S.2</cite>, etc.</li>
<li><strong>nconfigs</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – number of displaced configurations to create.</li>
<li><strong>config_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – the type of configuration.</li>
<li><strong>calculator</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – a dictionary containing the information for
the calculator object.</li>
<li><strong>trainable</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – True if the groups configs will be used for traning.</li>
<li><strong>pgrid</strong> (<em>ParamaterGrid</em>) – The ParameterGrid for the database.</li>
<li><strong>seeds</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>, </em><a class="reference internal" href="../atoms.html#matdb.atoms.Atoms" title="matdb.atoms.Atoms"><em>matdb.atoms.Atoms</em></a>) – The location of the files that will be
read into to make the atoms object or an atoms object.</li>
<li><strong>cls</strong> (<em>subclass</em>) – the subclass of <a class="reference internal" href="#matdb.database.Group" title="matdb.database.Group"><code class="xref py py-class docutils literal notranslate"><span class="pre">Group</span></code></a>.</li>
<li><strong>transforms</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – a dictionary of transformations to apply to the
seeds of the database before calculations are performed. Format is
{“name”: {“args”: dict of keyword args}}, where the “name” keyword
is the fully qualified path to the function.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="matdb.database.Group.atoms">
<code class="descname">atoms</code><a class="headerlink" href="#matdb.database.Group.atoms" title="Permalink to this definition">¶</a></dt>
<dd><p>a single atomic configuration from
which many others may be derived using MD, phonon
displacements, etc.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference internal" href="../atoms.html#matdb.atoms.Atoms" title="matdb.atoms.Atoms">matdb.atoms.Atoms</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="matdb.database.Group.configs">
<code class="descname">configs</code><a class="headerlink" href="#matdb.database.Group.configs" title="Permalink to this definition">¶</a></dt>
<dd><p>keys are integer identifiers for the particular
configuration; values are paths (relative to the base atoms root
directory) in which calculations are performed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="matdb.database.Group.root">
<code class="descname">root</code><a class="headerlink" href="#matdb.database.Group.root" title="Permalink to this definition">¶</a></dt>
<dd><p>full path to the root directory that this database will live
in.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="matdb.database.Group.database">
<code class="descname">database</code><a class="headerlink" href="#matdb.database.Group.database" title="Permalink to this definition">¶</a></dt>
<dd><p>parent database to which this group belongs.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference internal" href="#matdb.database.Database" title="matdb.database.Database">matdb.database.Database</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="matdb.database.Group.prefix">
<code class="descname">prefix</code><a class="headerlink" href="#matdb.database.Group.prefix" title="Permalink to this definition">¶</a></dt>
<dd><p>sub-sampled configurations will be stored using integer
ids after this prefix; for example <cite>S.1</cite>, <cite>S.2</cite>, etc.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="matdb.database.Group.nconfigs">
<code class="descname">nconfigs</code><a class="headerlink" href="#matdb.database.Group.nconfigs" title="Permalink to this definition">¶</a></dt>
<dd><p>number of displaced configurations to create.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)">int</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="matdb.database.Group.pgrid">
<code class="descname">pgrid</code><a class="headerlink" href="#matdb.database.Group.pgrid" title="Permalink to this definition">¶</a></dt>
<dd><p>The ParameterGrid for the database.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body">ParamaterGrid</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="matdb.database.Group.grpargs">
<code class="descname">grpargs</code><a class="headerlink" href="#matdb.database.Group.grpargs" title="Permalink to this definition">¶</a></dt>
<dd><p>default arguments to construct the new groups; will
be overridden by any parameter grid specs.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="matdb.database.Group.splittable">
<code class="descname">splittable</code><a class="headerlink" href="#matdb.database.Group.splittable" title="Permalink to this definition">¶</a></dt>
<dd><p>when True, this Group can be split into training,
holdout and super sets because its configs are independent; otherwise,
the configs are kept together and used <em>only</em> in the training set.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)">bool</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="matdb.database.Group.calculator">
<code class="descname">calculator</code><a class="headerlink" href="#matdb.database.Group.calculator" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a representative calculator for the group. This will be the calculator
attached to one of the <code class="xref py py-attr docutils literal notranslate"><span class="pre">config_atoms</span></code> in the expanded group.</p>
</dd></dl>

<dl class="method">
<dt id="matdb.database.Group.can_extract">
<code class="descname">can_extract</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#Group.can_extract"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.Group.can_extract" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs post-execution routines to clean-up the calculations. This super class
implementation only checks that each of the sub-config directories has
the necessary files needed for extraction of output.</p>
</dd></dl>

<dl class="method">
<dt id="matdb.database.Group.create">
<code class="descname">create</code><span class="sig-paren">(</span><em>atoms</em>, <em>cid=None</em>, <em>rewrite=False</em>, <em>sort=None</em>, <em>calcargs=None</em>, <em>extractable=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#Group.create"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.Group.create" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a folder within this group to calculate properties.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>atoms</strong> (<a class="reference internal" href="../atoms.html#matdb.atoms.Atoms" title="matdb.atoms.Atoms"><em>matdb.atoms.Atoms</em></a>) – atomic configuration to run.</li>
<li><strong>cid</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – integer configuration id; if not specified, defaults to
the next available integer.</li>
<li><strong>rewrite</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – when True, overwrite any existing files with the
latest settings.</li>
<li><strong>sort</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – when True, sort the atoms by type so that
supercell writes work correctly.</li>
<li><strong>calcargs</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – additional config-specific arguments for the
calculator that will be created and attached to the atoms object.</li>
<li><strong>extractable</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – True if the creation needs to write files for
later calculation and extraction. If False then we just write
an atoms.h5 object for later use as a seed for another group.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">new integer configuration id if one was auto-assigned.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)">int</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">database</code></dt>
<dd><p>Returns the parent <a class="reference internal" href="#matdb.database.Database" title="matdb.database.Database"><code class="xref py py-class docutils literal notranslate"><span class="pre">Database</span></code></a> instance for
this group, irrespective of how deep it is in the recursive stack.</p>
</dd></dl>

<dl class="attribute">
<dt id="matdb.database.Group.dep">
<code class="descname">dep</code><a class="headerlink" href="#matdb.database.Group.dep" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds the next, or dependent, group in the databes.</p>
</dd></dl>

<dl class="method">
<dt id="matdb.database.Group.execute">
<code class="descname">execute</code><span class="sig-paren">(</span><em>dryrun=False</em>, <em>recovery=False</em>, <em>env_vars=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#Group.execute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.Group.execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Submits the job script for each of the folders in this
database if they are ready to run.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>dryrun</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – when True, simulate the submission without actually submitting.</li>
<li><strong>recovery</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – when True, submit the script for running recovery jobs.</li>
<li><strong>env_vars</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – dict of environment variables to set before calling the execution. The variables will be set back after execution.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">True if the submission generated a job id (considered successful).</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)">bool</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="matdb.database.Group.extract">
<code class="descname">extract</code><span class="sig-paren">(</span><em>cleanup='default'</em>, <em>asis=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#Group.extract"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.Group.extract" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a hdf5 file for each atoms object in the group.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>cleanup</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – the level of cleanup to perform after
extraction.</li>
<li><strong>asis</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – when True, read the results even if the calculation
didn’t converge to required accuracy.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="matdb.database.Group.finalize">
<code class="descname">finalize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#Group.finalize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.Group.finalize" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dictionary of the uuid, hash, parameters, and the rset
for the group.</p>
</dd></dl>

<dl class="attribute">
<dt id="matdb.database.Group.fitting_configs">
<code class="descname">fitting_configs</code><a class="headerlink" href="#matdb.database.Group.fitting_configs" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a <a class="reference internal" href="../atoms.html#matdb.atoms.AtomsList" title="matdb.atoms.AtomsList"><code class="xref py py-class docutils literal notranslate"><span class="pre">AtomsList</span></code></a> for all configs in this group.</p>
</dd></dl>

<dl class="method">
<dt id="matdb.database.Group.hash_group">
<code class="descname">hash_group</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#Group.hash_group"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.Group.hash_group" title="Permalink to this definition">¶</a></dt>
<dd><p>Hashes the rset and the parameters of the  for the group.</p>
</dd></dl>

<dl class="attribute">
<dt id="matdb.database.Group.iconfigs">
<code class="descname">iconfigs</code><a class="headerlink" href="#matdb.database.Group.iconfigs" title="Permalink to this definition">¶</a></dt>
<dd><p>Provides a generator over all the configurations in this group and its
children.</p>
</dd></dl>

<dl class="method">
<dt id="matdb.database.Group.is_executing">
<code class="descname">is_executing</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#Group.is_executing"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.Group.is_executing" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if the database DFT calculations are in process of being
executed.</p>
</dd></dl>

<dl class="method">
<dt id="matdb.database.Group.is_setup">
<code class="descname">is_setup</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#Group.is_setup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.Group.is_setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Determines if all the necessary folders for sub-configurations of the seed
atomic configuration exist.</p>
</dd></dl>

<dl class="method">
<dt id="matdb.database.Group.jobfile">
<code class="descname">jobfile</code><span class="sig-paren">(</span><em>rerun=0</em>, <em>recovery=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#Group.jobfile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.Group.jobfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates the job array file to run each of the sub-configurations in
this database.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>rerun</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – when &gt; 0, recreate the jobfile even if it already exists.</li>
<li><strong>recovery</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – when True, configure the jobfile to run recovery jobs for those that have previously failed. This uses a different template and execution path.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="matdb.database.Group.key">
<code class="descname">key</code><a class="headerlink" href="#matdb.database.Group.key" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the directory name for the group (i.e.,
<a class="reference external" href="https://docs.python.org/3/library/os.path.html#os.path.basename" title="(in Python v3.7)"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.path.basename()</span></code></a>).</p>
</dd></dl>

<dl class="method">
<dt id="matdb.database.Group.load_pkl">
<code class="descname">load_pkl</code><span class="sig-paren">(</span><em>file_name</em>, <em>rel_path=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#Group.load_pkl"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.Group.load_pkl" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads a pickled obj from the specified location on the path.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>file_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – the file name to be save too.</li>
<li><strong>rel_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – the relative path from self.root that the file will
be saved to.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="matdb.database.Group.prev">
<code class="descname">prev</code><a class="headerlink" href="#matdb.database.Group.prev" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds the previous group in the database.</p>
</dd></dl>

<dl class="method">
<dt id="matdb.database.Group.ready">
<code class="descname">ready</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#Group.ready"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.Group.ready" title="Permalink to this definition">¶</a></dt>
<dd><p>Determines if this database has been completely initialized <em>and</em> has
all its computations’ results ready.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This method should be overloaded by a sub-class.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#NotImplementedError" title="(in Python v3.7)"><strong>NotImplementedError</strong></a> – this method is intended to be overloaded by a sub-class.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="matdb.database.Group.recover">
<code class="descname">recover</code><span class="sig-paren">(</span><em>rerun=0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#Group.recover"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.Group.recover" title="Permalink to this definition">¶</a></dt>
<dd><p>Compiles a list of all DFT runs that didn’t complete and compiles the
<cite>failures</cite> file. Creates a jobfile to re-run the failed
folders only.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>rerun</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – when &gt; 0, recreate the jobfile even if it
already exists.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="matdb.database.Group.rset">
<code class="descname">rset</code><a class="headerlink" href="#matdb.database.Group.rset" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves the rset for the group and all sequences of the group.</p>
</dd></dl>

<dl class="attribute">
<dt id="matdb.database.Group.rset_file">
<code class="descname">rset_file</code><a class="headerlink" href="#matdb.database.Group.rset_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the full path to the <cite>rset.h5</cite> file for this group.</p>
</dd></dl>

<dl class="method">
<dt id="matdb.database.Group.save_index">
<code class="descname">save_index</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#Group.save_index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.Group.save_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes the unique index for each of the configs to file along with
the relative path to the atoms.json file</p>
</dd></dl>

<dl class="method">
<dt id="matdb.database.Group.save_pkl">
<code class="descname">save_pkl</code><span class="sig-paren">(</span><em>obj</em>, <em>file_name</em>, <em>rel_path=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#Group.save_pkl"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.Group.save_pkl" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves the obj passed to the correct location on the path.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>obj</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – The dictionary to be written to file.</li>
<li><strong>file_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – the file name to be save too.</li>
<li><strong>rel_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – the relative path from self.root that the file will
be saved to.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="matdb.database.Group.setup">
<code class="descname">setup</code><span class="sig-paren">(</span><em>db_setup</em>, <em>rerun=0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#Group.setup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.Group.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs the setup of the database using the <cite>db_setup</cite> function
passed in by the specific group instance.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>db_setup</strong> (<em>function</em>) – a function that will perform the setup for each
group independently.</li>
<li><strong>rerun</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – values &gt; 0 cause rerunning of the setup at different granularity.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="matdb.database.Group.status">
<code class="descname">status</code><span class="sig-paren">(</span><em>print_msg=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#Group.status"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.Group.status" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a status message for statistics of sub-configuration execution.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>print_msg</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – when True, return a text message with aggregate status information; otherwise, return a dict of the numbers involved.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="matdb.database.Group.sub_dict">
<code class="descname">sub_dict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#Group.sub_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.Group.sub_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dictionary of the parameters passed in to create this
group.</p>
</dd></dl>

<dl class="method">
<dt id="matdb.database.Group.tarball">
<code class="descname">tarball</code><span class="sig-paren">(</span><em>filename='output.tar.gz'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#Group.tarball"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.Group.tarball" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a zipped tar archive that contains each of the specified
files in sub-sampled configurations’ output folders.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>filename</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – name of the zipped archive to create.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="matdb.database.Group.to_dict">
<code class="descname">to_dict</code><span class="sig-paren">(</span><em>include_time_stamp=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#Group.to_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.Group.to_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dictionary of the parameters passed into the group instance.</p>
</dd></dl>

<dl class="attribute">
<dt id="matdb.database.Group.trainable">
<code class="descname">trainable</code><a class="headerlink" href="#matdb.database.Group.trainable" title="Permalink to this definition">¶</a></dt>
<dd><p>Determines if the group configs should be used for training.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="matdb.database.RecycleBin">
<em class="property">class </em><code class="descclassname">matdb.database.</code><code class="descname">RecycleBin</code><span class="sig-paren">(</span><em>parent</em>, <em>root</em>, <em>splits</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#RecycleBin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.RecycleBin" title="Permalink to this definition">¶</a></dt>
<dd><p>A database of past calculations to be stored for later use.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>parent</strong> (<a class="reference internal" href="#matdb.database.Controller" title="matdb.database.Controller"><em>Controller</em></a>) – instance controlling multiple configurations.</li>
<li><strong>root</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – root directory in which the ‘RecycleBin’ folder will
be placed.</li>
<li><strong>splits</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – keys are split names; values are <cite>float</cite> <em>training</em>
percentages to use.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="matdb.database.RecycleBin.execute">
<code class="descname">execute</code><span class="sig-paren">(</span><em>recovery=False</em>, <em>env_vars=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#RecycleBin.execute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.RecycleBin.execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Submits job array files for any of the databases that are ready to
execute, but which haven’t been submitted yet.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>recovery</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – when True, submit the script for running recovery
jobs.</li>
<li><strong>env_vars</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – dict of environment variables to set before calling the
execution. The variables will be set back after execution.</li>
<li><strong>dryrun</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – when True, don’t submit any jobs for execution, just
say what would happen.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="matdb.database.RecycleBin.extract">
<code class="descname">extract</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#RecycleBin.extract"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.RecycleBin.extract" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs the extract methods of each database in the collection, in the
correct order.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>cleanup</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – the level of cleanup to perform after extraction.</li>
<li><strong>asis</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – when True, read the results even if the calculation
didn’t converge to required accuracy.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="matdb.database.RecycleBin.hash_bin">
<code class="descname">hash_bin</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#RecycleBin.hash_bin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.RecycleBin.hash_bin" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a hash of the atoms objcets in the recycle bin.</p>
</dd></dl>

<dl class="attribute">
<dt id="matdb.database.RecycleBin.isteps">
<code class="descname">isteps</code><a class="headerlink" href="#matdb.database.RecycleBin.isteps" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a generator over steps in this sequence. The generator yields
the next step <em>only</em> if the previous one is already finished (i.e., the
<cite>ready()</cite> method returns True.</p>
</dd></dl>

<dl class="method">
<dt id="matdb.database.RecycleBin.recover">
<code class="descname">recover</code><span class="sig-paren">(</span><em>rerun=0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#RecycleBin.recover"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.RecycleBin.recover" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs recovery on this database to determine which configs failed and
then create a jobfile to requeue them for compute.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>rerun</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – when &gt; 0, recreate the jobfile even if it already exists.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="matdb.database.RecycleBin.rset">
<code class="descname">rset</code><a class="headerlink" href="#matdb.database.RecycleBin.rset" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of all the atoms object files in the RecycleBin.</p>
</dd></dl>

<dl class="method">
<dt id="matdb.database.RecycleBin.setup">
<code class="descname">setup</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#RecycleBin.setup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.RecycleBin.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets up the database collection by generating the POTCAR file and
initializing any databases that haven’t already been initialized.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The db setup functions are setup to only execute once, and then only if their dependencies have completed their calculations. This method can, therefore, be safely called repeatedly between different terminal sessions.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>rerun</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – when &gt; 0, recreate the folders even if they
already exist. Higher levels redo more of the work.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="matdb.database.RecycleBin.split">
<code class="descname">split</code><span class="sig-paren">(</span><em>recalc=0</em>, <em>dfilter=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#RecycleBin.split"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.RecycleBin.split" title="Permalink to this definition">¶</a></dt>
<dd><p>Splits the total available data in the recycle bin.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>recalc</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – when non-zero, re-split the data and overwrite any
existing <a href="#id3"><span class="problematic" id="id4">*</span></a>.h5 files. This parameter decreases as
rewrites proceed down the stack. To re-calculate
lower-level h5 files, increase this value.</li>
<li><strong>dfilter</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a>) – list of <cite>str</cite> patterns to match against <em>database sequence</em>
names. This limits which databases sequences are returned.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="matdb.database.RecycleBin.status">
<code class="descname">status</code><span class="sig-paren">(</span><em>busy=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#RecycleBin.status"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.RecycleBin.status" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints a status message for each of the databases relative
to VASP execution status.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>busy</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – when True, print a list of the configurations that are still busy being computed in DFT.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="matdb.database.RecycleBin.to_dict">
<code class="descname">to_dict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database.html#RecycleBin.to_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.RecycleBin.to_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dictionary of the database parameters and settings.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-matdb.database.utility">
<span id="database-utility-module"></span><h2>Database Utility Module<a class="headerlink" href="#module-matdb.database.utility" title="Permalink to this headline">¶</a></h2>
<p>Contains all the utility functions that belong to the database groups.</p>
<dl class="function">
<dt id="matdb.database.utility.dbconfig">
<code class="descclassname">matdb.database.utility.</code><code class="descname">dbconfig</code><span class="sig-paren">(</span><em>dbfile</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database/utility.html#dbconfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.utility.dbconfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the database configuration <cite>dict</cite> of the specified database file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>dbfile</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – Path to the database file for which to get config information.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="matdb.database.utility.decompress">
<code class="descclassname">matdb.database.utility.</code><code class="descname">decompress</code><span class="sig-paren">(</span><em>prim</em>, <em>basis</em>, <em>types_int</em>, <em>hnf_int</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database/utility.html#decompress"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.utility.decompress" title="Permalink to this definition">¶</a></dt>
<dd><p>Decompresses the crystal back into its original form.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>prim</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a>) – the primitive lattice vectors as rows of a matrix.</li>
<li><strong>basis</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a>) – the atomic basis vectors as rows of a matrix.</li>
<li><strong>types</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – list of species converted to a single int.</li>
<li><strong>hnf_int</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – hnf entries converted to integer.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The new crystal lattice vectors, atomic basis and atomic types.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="matdb.database.utility.hermite_normal_form">
<code class="descclassname">matdb.database.utility.</code><code class="descname">hermite_normal_form</code><span class="sig-paren">(</span><em>n</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database/utility.html#hermite_normal_form"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.utility.hermite_normal_form" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts an integer matrix to hermite normal form.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>n</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a>) – a 2D list of integers.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The integer matrix converted to Hermite Normal Form and
the matrix needed to transform the input matrix to the HNF.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="matdb.database.utility.make_primitive">
<code class="descclassname">matdb.database.utility.</code><code class="descname">make_primitive</code><span class="sig-paren">(</span><em>atm</em>, <em>eps=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database/utility.html#make_primitive"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.utility.make_primitive" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds the primitive cell of a given crystal and the HNF needed to
convert the primitive to the current crystal.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>atm</strong> (<a class="reference internal" href="../atoms.html#matdb.atoms.Atoms" title="matdb.atoms.Atoms"><em>matdb.atoms.Atoms</em></a>) – an atoms object.</li>
<li><strong>esp</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – floating point tolerance.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The lattice and atomic basis vectors of the primitive cell along
with the HNF needed to map the primitive cell to the original cell.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="matdb.database.utility.parse_path">
<code class="descclassname">matdb.database.utility.</code><code class="descname">parse_path</code><span class="sig-paren">(</span><em>root</em>, <em>seeds</em>, <em>ran_seed=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database/utility.html#parse_path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.utility.parse_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds the full path to the seed files for this system.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>root</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – the root directory for the database.</li>
<li><strong>seeds</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a>) – the seeds for the database that need to be parsed and have the root folder found.</li>
<li><strong>ran_seed</strong> (<em>optional</em>) – the seed for the random generator if used.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">a list of the seed files for the database.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)">list</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="matdb.database.utility.split">
<code class="descclassname">matdb.database.utility.</code><code class="descname">split</code><span class="sig-paren">(</span><em>atlist</em>, <em>splits</em>, <em>targets</em>, <em>dbdir</em>, <em>ran_seed</em>, <em>dbfile=None</em>, <em>recalc=0</em>, <em>nonsplit=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database/utility.html#split"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.utility.split" title="Permalink to this definition">¶</a></dt>
<dd><p>Splits the <a class="reference internal" href="../atoms.html#matdb.atoms.AtomsList" title="matdb.atoms.AtomsList"><code class="xref py py-class docutils literal notranslate"><span class="pre">AtomsList</span></code></a> multiple times, one for
each <cite>split</cite> setting in the database specification.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>atlsit</strong> (<a class="reference internal" href="../atoms.html#matdb.atoms.AtomsList" title="matdb.atoms.AtomsList"><em>AtomsList</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.7)"><em>list</em></a>) – the list of <a class="reference internal" href="../atoms.html#matdb.atoms.Atoms" title="matdb.atoms.Atoms"><code class="xref py py-class docutils literal notranslate"><span class="pre">matdb.atoms.Atoms</span></code></a> objects
to be split or a list to the files containing the atoms objects.</li>
<li><strong>splits</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – the splits to perform.</li>
<li><strong>targets</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – the files to save the splits in, these should
contain a {} in the name which will be replaced with the split
name. The dictionary must have the format {“train”: file_name,
“holdout”: file_name, “super”: file_name}.</li>
<li><strong>dbdir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – the root <em>splits</em> directory for the database.</li>
<li><strong>dbfile</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – the _dbfile for a legacy database.</li>
<li><strong>ran_seed</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – the random seed for the splits (i.e. the controllers
random seed).</li>
<li><strong>recalc</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – when non-zero, re-split the data and overwrite any
existing <a href="#id5"><span class="problematic" id="id6">*</span></a>.h5 files. This parameter decreases as
rewrites proceed down the stack. To re-calculate
lower-level h5 files, increase this value.</li>
<li><strong>nonsplit</strong> (<a class="reference internal" href="../atoms.html#matdb.atoms.AtomsList" title="matdb.atoms.AtomsList"><em>AtomsList</em></a>) – a list of atoms to include in the training
set “as-is” because they cannot be split (they only have meaning
together).</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="matdb.database.utility.swap_column">
<code class="descclassname">matdb.database.utility.</code><code class="descname">swap_column</code><span class="sig-paren">(</span><em>hnf</em>, <em>b</em>, <em>row</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/matdb/database/utility.html#swap_column"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#matdb.database.utility.swap_column" title="Permalink to this definition">¶</a></dt>
<dd><p>Swaps the non-zero element in the designated row for both hnf and b
matrices.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>hnf</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.16)"><em>numpy.ndarray</em></a>) – an integer matrix.</li>
<li><strong>b</strong> (<a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.16)"><em>numpy.ndarray</em></a>) – an integer matrix.</li>
<li><strong>row</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – the row that the swap will be centered on.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The hnf and b matrices with their columns swapped so that hnf[row,row] is
non-zero.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Database &amp; Database Utility Documentation</a><ul>
<li><a class="reference internal" href="#module-matdb.database">Database Module</a></li>
<li><a class="reference internal" href="#module-matdb.database.utility">Database Utility Module</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="prototype.html"
                        title="previous chapter">Prototype Database Documentation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../fitting.html"
                        title="next chapter">Potential Fitting API</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/database/utility.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../fitting.html" title="Potential Fitting API"
             >next</a> |</li>
        <li class="right" >
          <a href="prototype.html" title="Prototype Database Documentation"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">matdb 0.0.5 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../databases.html" >Database Types</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, Conrad W. Rosenbrock.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.5.
    </div>
  </body>
</html>